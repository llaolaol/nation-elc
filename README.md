# å›½ç½‘æ•…éšœè¯Šæ–­ç³»ç»Ÿ (State Grid Fault Diagnosis System)

åŸºäºé€»è¾‘é—¨å’Œ n8n å·¥ä½œæµçš„æ™ºèƒ½åŒ–ç”µåŠ›è®¾å¤‡æ•…éšœè¯Šæ–­ç³»ç»Ÿï¼Œæä¾›å…¨é¢çš„å˜å‹å™¨æ•…éšœåˆ†æã€å¯è§†åŒ–å’Œç®¡ç†åŠŸèƒ½ã€‚

## é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªä¸“ä¸ºå›½å®¶ç”µç½‘è®¾è®¡çš„ç°ä»£åŒ–æ•…éšœè¯Šæ–­ç³»ç»Ÿï¼Œé›†æˆäº†å¤šç§å…ˆè¿›çš„æ•…éšœè¯Šæ–­æŠ€æœ¯ã€‚ç³»ç»Ÿä¸ä»…æ”¯æŒä¼ ç»Ÿçš„DGAï¼ˆæº¶è§£æ°”ä½“åˆ†æï¼‰ã€ä¸‰æ¯”å€¼æ³•ã€DPMåˆ†æï¼Œè¿˜åˆ›æ–°æ€§åœ°å¼•å…¥äº†é€»è¾‘é—¨å¯è§†åŒ–æŠ€æœ¯ï¼Œæä¾›ç›´è§‚çš„æ•…éšœæ ‘å±•ç¤ºå’Œç®¡ç†åŠŸèƒ½ã€‚

### ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

- ğŸ§  **æ™ºèƒ½é€»è¾‘é—¨è¯Šæ–­**ï¼šåˆ›æ–°çš„é€»è¾‘é—¨æ•…éšœæ ‘å¯è§†åŒ–ï¼Œæ”¯æŒAND/OR/NOTé€»è¾‘å…³ç³»
- ğŸ”¬ **å¤šç»´æ•…éšœåˆ†æ**ï¼šé›†æˆDGAåˆ†æã€ä¸‰æ¯”å€¼æ³•ã€DPMåˆ†æã€PRPDå±€æ”¾ç‰¹å¾åˆ†æ
- ğŸ“Š **ä¸“ä¸šå¯è§†åŒ–**ï¼šåŸºäºä¸“ä¸šç®—æ³•çš„å¤šç§å¸ƒå±€æ¨¡å¼ï¼ˆå±‚æ¬¡ã€å¾„å‘ã€ç´§å‡‘ï¼‰
- ğŸ–¼ï¸ **å›¾åƒAIè¯Šæ–­**ï¼šæ”¯æŒPRPDã€UHFã€TEVã€AEç­‰å›¾åƒçš„æ™ºèƒ½è¯†åˆ«åˆ†æ
- ğŸ—ƒï¸ **æ•…éšœæ ‘ç®¡ç†**ï¼šå®Œæ•´çš„æ•…éšœæ ‘ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ˆCRUDæ“ä½œï¼‰
- ğŸ“ˆ **å†å²è¿½è¸ª**ï¼šå®Œæ•´çš„è¯Šæ–­å†å²è®°å½•å’Œè¶‹åŠ¿åˆ†æ
- ğŸ“„ **æ–‡æ¡£ç®¡ç†**ï¼šæ”¯æŒå¤šç§æ ¼å¼çš„æŠ€æœ¯æ–‡æ¡£åœ¨çº¿ç®¡ç†
- ğŸ“± **å“åº”å¼è®¾è®¡**ï¼šé€‚é…ä¸åŒè®¾å¤‡çš„ç°ä»£åŒ–ä¼ä¸šçº§UIç•Œé¢

## æŠ€æœ¯æ ˆ

### å‰ç«¯æ¡†æ¶
- **Vue 3** - æ¸è¿›å¼ JavaScript æ¡†æ¶
- **TypeScript** - ç±»å‹å®‰å…¨çš„ JavaScript è¶…é›†
- **Vite** - å¿«é€Ÿçš„å‰ç«¯æ„å»ºå·¥å…·

### UI ç»„ä»¶ä¸æ ·å¼
- **Element Plus** - åŸºäº Vue 3 çš„ç»„ä»¶åº“
- **ECharts** + **vue-echarts** - æ•°æ®å¯è§†åŒ–å›¾è¡¨åº“

### çŠ¶æ€ç®¡ç†ä¸è·¯ç”±
- **Pinia** - Vue 3 å®˜æ–¹çŠ¶æ€ç®¡ç†åº“
- **Vue Router** - Vue.js å®˜æ–¹è·¯ç”±ç®¡ç†å™¨

### æ–‡æ¡£å¤„ç†
- **PDF.js** - PDF æ–‡æ¡£è§£æå’Œå±•ç¤º
- **xlsx** - Excel æ–‡æ¡£å¤„ç†åº“

### å¼€å‘å·¥å…·
- **ESLint** - ä»£ç è´¨é‡æ£€æŸ¥
- **Prettier** - ä»£ç æ ¼å¼åŒ–
- **TypeScript** - ç±»å‹æ£€æŸ¥

## åŠŸèƒ½æ¨¡å—

### 1. ğŸ”§ æ•…éšœæ¨ç†è¯Šæ–­
- **å¤šå‚æ•°è¾“å…¥**ï¼šæ”¯æŒ 7 ç§å…³é”®æ°”ä½“æµ“åº¦å‚æ•°ï¼ˆH2ã€CH4ã€C2H6ã€C2H4ã€C2H2ã€COã€CO2ï¼‰
- **æ™ºèƒ½éªŒè¯**ï¼šå®æ—¶å‚æ•°éªŒè¯å’Œä¸“ä¸šèŒƒå›´æ£€æŸ¥
- **å¤šé‡åˆ†æ**ï¼šä¸‰æ¯”å€¼æ³•ã€DPMåˆ†æã€ç‰¹å¾æ°”ä½“åˆ†æ
- **è¯Šæ–­å¼•æ“**ï¼šåŸºäºå›½ç½‘æ ‡å‡†çš„æ™ºèƒ½è¯Šæ–­ç®—æ³•
- **ç»“æœå±•ç¤º**ï¼šè¯¦ç»†çš„å¤šç»´åº¦è¯Šæ–­ç»“æœå’Œä¸“ä¸šå»ºè®®

### 2. ğŸŒ³ æ•…éšœæ ‘å¯è§†åŒ–å±•ç¤º
- **é€»è¾‘é—¨å¯è§†åŒ–**ï¼šåˆ›æ–°çš„AND/OR/NOTé€»è¾‘é—¨å›¾å½¢å±•ç¤º
- **å¤šç§å¸ƒå±€**ï¼šå±‚æ¬¡å¸ƒå±€ã€å¾„å‘å¸ƒå±€ã€ç´§å‡‘å¸ƒå±€ä¸‰ç§ä¸“ä¸šæ¨¡å¼
- **äº¤äº’åŠŸèƒ½**ï¼šæ”¯æŒç¼©æ”¾ã€æ‹–æ‹½ã€èŠ‚ç‚¹ç‚¹å‡»äº¤äº’
- **é€»è¾‘å…³ç³»**ï¼šè¿çº¿ä¸Šæ˜¾ç¤ºé€»è¾‘å…³ç³»ç¬¦å·ï¼Œç›´è§‚å±•ç¤ºæ•…éšœé€»è¾‘
- **çŠ¶æ€æ˜¾ç¤º**ï¼šå®æ—¶æ˜¾ç¤ºé€»è¾‘é—¨çŠ¶æ€ï¼ˆçœŸ/å‡/æœªçŸ¥ï¼‰
- **ä¸“ä¸šæ•°æ®**ï¼šåŸºäºå®é™…PDFæŠ€æœ¯æ–‡æ¡£çš„ä¸“ä¸šæ•…éšœè¯Šæ–­æ•°æ®

### 3. ğŸ—‚ï¸ æ•…éšœæ ‘ç®¡ç†ç³»ç»Ÿ
- **å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†**ï¼šæ•…éšœæ ‘çš„åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤ã€å…‹éš†æ“ä½œ
- **å…ƒæ•°æ®ç®¡ç†**ï¼šç‰ˆæœ¬æ§åˆ¶ã€çŠ¶æ€ç®¡ç†ã€æƒé™è®¾ç½®
- **èŠ‚ç‚¹ç¼–è¾‘å™¨**ï¼šå¯è§†åŒ–èŠ‚ç‚¹ç¼–è¾‘ï¼Œæ”¯æŒæ•…éšœèŠ‚ç‚¹å’Œé€»è¾‘é—¨èŠ‚ç‚¹
- **æ¨¡æ¿ç³»ç»Ÿ**ï¼šæ•…éšœæ ‘æ¨¡æ¿ç®¡ç†å’Œå¿«é€Ÿå¤åˆ¶åŠŸèƒ½
- **æœç´¢ç­›é€‰**ï¼šæŒ‰çŠ¶æ€ã€ç±»åˆ«ã€æ ‡ç­¾ã€æ—¶é—´èŒƒå›´ç­‰å¤šç»´åº¦ç­›é€‰
- **æ‰¹é‡æ“ä½œ**ï¼šæ”¯æŒæ‰¹é‡å¯¼å‡ºã€åˆ é™¤ç­‰æ“ä½œ

### 4. ğŸ–¼ï¸ å›¾åƒæ™ºèƒ½è¯Šæ–­
- **å¤šæ ¼å¼æ”¯æŒ**ï¼šPRPDã€UHFã€TEVã€AEç­‰å¤šç§å›¾åƒæ ¼å¼
- **AIæ™ºèƒ½åˆ†æ**ï¼šåŸºäºæ·±åº¦å­¦ä¹ çš„å›¾åƒè¯†åˆ«å’Œåˆ†æ
- **ä»»åŠ¡ç®¡ç†**ï¼šå¼‚æ­¥ä»»åŠ¡å¤„ç†ï¼Œå®æ—¶è¿›åº¦è¿½è¸ª
- **ç»“æœå¯è§†åŒ–**ï¼šæ ‡æ³¨ç»“æœå±•ç¤ºï¼Œæ”¯æŒç½®ä¿¡åº¦æ˜¾ç¤º
- **ä¸“ä¸šæŠ¥å‘Š**ï¼šç”Ÿæˆè¯¦ç»†çš„å›¾åƒè¯Šæ–­åˆ†ææŠ¥å‘Š

### 5. ğŸ“ˆ è¯Šæ–­å†å²ç®¡ç†
- **å®Œæ•´è®°å½•**ï¼šå…¨é¢çš„è¯Šæ–­å†å²æ•°æ®å­˜å‚¨
- **è¶‹åŠ¿åˆ†æ**ï¼šè¯Šæ–­ç»“æœçš„æ—¶é—´è¶‹åŠ¿å›¾è¡¨å±•ç¤º
- **æ•°æ®å¯¼å‡º**ï¼šæ”¯æŒå¤šç§æ ¼å¼çš„å†å²æ•°æ®å¯¼å‡º
- **å¯¹æ¯”åˆ†æ**ï¼šä¸åŒæ—¶æœŸè¯Šæ–­ç»“æœçš„å¯¹æ¯”åŠŸèƒ½
- **ç»Ÿè®¡æŠ¥è¡¨**ï¼šè¯Šæ–­é¢‘æ¬¡ã€æ•…éšœç±»å‹åˆ†å¸ƒç­‰ç»Ÿè®¡

### 6. ğŸ“„ æ–‡æ¡£ç®¡ç†ç³»ç»Ÿ
- **æ ¼å¼æ”¯æŒ**ï¼šPDFã€Excelã€Wordã€JSONã€å›¾ç‰‡ç­‰å¤šæ ¼å¼
- **åœ¨çº¿é¢„è§ˆ**ï¼šæ”¯æŒæ–‡æ¡£çš„åœ¨çº¿é¢„è§ˆåŠŸèƒ½
- **åˆ†ç±»ç®¡ç†**ï¼šæ–‡æ¡£åˆ†ç±»å’Œæ ‡ç­¾ç³»ç»Ÿ
- **æœç´¢åŠŸèƒ½**ï¼šå…¨æ–‡æœç´¢å’Œç­›é€‰åŠŸèƒ½
- **ç‰ˆæœ¬æ§åˆ¶**ï¼šæ–‡æ¡£ç‰ˆæœ¬ç®¡ç†å’Œå†å²è¿½è¸ª

## é¡¹ç›®æ¶æ„

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

**å‰ç«¯æ¡†æ¶**: Vue 3 + TypeScript + Vite  
**UIç»„ä»¶åº“**: Element Plus + @element-plus/icons-vue  
**å›¾è¡¨å¯è§†åŒ–**: ECharts + vue-echarts  
**çŠ¶æ€ç®¡ç†**: Pinia  
**è·¯ç”±ç®¡ç†**: Vue Router  
**æ–‡æ¡£å¤„ç†**: PDF.js + xlsx  
**å¼€å‘å·¥å…·**: ESLint + Prettier + Vue DevTools  

### é¡¹ç›®ç»“æ„

```
fault-diagnosis-system/
â”œâ”€â”€ public/                          # é™æ€èµ„æº
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ assets/                     # é™æ€èµ„æºæ–‡ä»¶
â”‚   â”œâ”€â”€ components/                 # Vue ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ common/                # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ErrorBoundary.vue  # é”™è¯¯è¾¹ç•Œç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ LoadingComponent.vue # åŠ è½½ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ SmartForm.vue      # æ™ºèƒ½è¡¨å•ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ SmartTable.vue     # æ™ºèƒ½è¡¨æ ¼ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ icons/                 # å›¾æ ‡ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ image/                 # å›¾åƒè¯Šæ–­ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ImageUploader.vue  # å›¾åƒä¸Šä¼ ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ResultDisplay.vue  # ç»“æœå±•ç¤ºç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ TaskManager.vue    # ä»»åŠ¡ç®¡ç†ç»„ä»¶
â”‚   â”‚   â””â”€â”€ logic/                 # é€»è¾‘é—¨ç›¸å…³ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ EnhancedFaultTree.vue    # å¢å¼ºæ•…éšœæ ‘ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ LogicGateIcon.vue        # é€»è¾‘é—¨å›¾æ ‡ç»„ä»¶
â”‚   â”‚       â””â”€â”€ LogicGateNode.vue        # é€»è¾‘é—¨èŠ‚ç‚¹ç»„ä»¶
â”‚   â”œâ”€â”€ router/                    # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ services/                  # API æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ diagnosis.ts          # æ•…éšœè¯Šæ–­æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ imageDiagnosis.ts     # å›¾åƒè¯Šæ–­æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ mockApi.v2.ts         # æ¨¡æ‹Ÿ API æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ visualization.ts      # å¯è§†åŒ–æœåŠ¡
â”‚   â”‚   â””â”€â”€ workflowParser.ts     # å·¥ä½œæµè§£ææœåŠ¡
â”‚   â”œâ”€â”€ stores/                   # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ types/                    # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts             # ç»Ÿä¸€ç±»å‹å®šä¹‰æ–‡ä»¶
â”‚   â”œâ”€â”€ utils/                    # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ diagnosisTools.ts     # è¯Šæ–­å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ faultTreeParser.ts    # æ•…éšœæ ‘è§£æå·¥å…·
â”‚   â”‚   â”œâ”€â”€ logicGateRenderer.ts  # é€»è¾‘é—¨æ¸²æŸ“å™¨
â”‚   â”‚   â””â”€â”€ textParser.ts         # æ–‡æœ¬è§£æå·¥å…·
â”‚   â”œâ”€â”€ views/                    # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ FaultDiagnosis.vue           # æ•…éšœæ¨ç†é¡µé¢
â”‚   â”‚   â”œâ”€â”€ FaultTreePreview.vue         # æ•…éšœæ ‘é¢„è§ˆé¡µé¢
â”‚   â”‚   â”œâ”€â”€ Test1View.vue                # æ•…éšœæ ‘å±•ç¤ºé¡µé¢
â”‚   â”‚   â”œâ”€â”€ FaultTreeManagement.vue      # æ•…éšœæ ‘ç®¡ç†é¡µé¢
â”‚   â”‚   â”œâ”€â”€ ImageDiagnosis.vue           # å›¾åƒè¯Šæ–­é¡µé¢
â”‚   â”‚   â”œâ”€â”€ DiagnosisHistory.vue         # è¯Šæ–­å†å²é¡µé¢
â”‚   â”‚   â”œâ”€â”€ DocumentManagement.vue       # æ–‡æ¡£ç®¡ç†é¡µé¢
â”‚   â”‚   â””â”€â”€ HomeView.vue                 # é¦–é¡µ
â”‚   â”œâ”€â”€ App.vue                   # æ ¹ç»„ä»¶
â”‚   â””â”€â”€ main.ts                   # åº”ç”¨å…¥å£
â”œâ”€â”€ .claude/                      # Claude AI é…ç½®
â”œâ”€â”€ package.json                  # é¡¹ç›®ä¾èµ–é…ç½®
â”œâ”€â”€ tsconfig.json                # TypeScript é…ç½®
â”œâ”€â”€ vite.config.ts               # Vite æ„å»ºé…ç½®
â””â”€â”€ README.md                    # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## API é›†æˆè¯´æ˜

### ğŸ”— å¤šé‡APIé›†æˆæ¶æ„

ç³»ç»Ÿé‡‡ç”¨å¤šå±‚APIé›†æˆæ¶æ„ï¼Œæ”¯æŒå¤šç§è¯Šæ–­æ¨¡å¼å’Œæ•°æ®æºï¼š

1. **n8n Webhook é›†æˆ** - ä¼ ç»Ÿè¯Šæ–­API
2. **é€»è¾‘é—¨å·¥ä½œæµè§£æ** - n8n workflow JSONè§£æ
3. **å›¾åƒè¯Šæ–­API** - AIå›¾åƒåˆ†ææœåŠ¡
4. **æœ¬åœ°æ¨¡æ‹ŸAPI** - å¼€å‘æµ‹è¯•ç¯å¢ƒ

### n8n Webhook é›†æˆ

æœ¬ç³»ç»Ÿé€šè¿‡ n8n å¹³å°çš„ webhook åŠŸèƒ½å®ç°åç«¯æ•…éšœè¯Šæ–­é€»è¾‘é›†æˆã€‚

#### Webhook ç«¯ç‚¹é…ç½®

```typescript
// src/services/diagnosis.ts
const N8N_WEBHOOK_URL = 'http://3.27.250.156:5678/webhook/power-fault-diagnosis-1';
```

#### è¯·æ±‚æ ¼å¼

**HTTP æ–¹æ³•**: `POST`

**è¯·æ±‚å¤´**:
```
Content-Type: application/json
```

**è¯·æ±‚ä½“ç»“æ„**:
```typescript
// è¯·æ±‚æ•°æ®è¢«åŒ…è£…åœ¨æ•°ç»„ä¸­ï¼Œç¬¦åˆ n8n webhook çš„æœŸæœ›æ ¼å¼
[
  {
    H2_ppm: number,           // æ°¢æ°”æµ“åº¦ (ppm)
    CH4_ppm: number,          // ç”²çƒ·æµ“åº¦ (ppm)
    C2H6_ppm: number,         // ä¹™çƒ·æµ“åº¦ (ppm)
    C2H4_ppm: number,         // ä¹™çƒ¯æµ“åº¦ (ppm)
    C2H2_ppm: number,         // ä¹™ç‚”æµ“åº¦ (ppm)
    CO_ppm: number,           // ä¸€æ°§åŒ–ç¢³æµ“åº¦ (ppm)
    CO2_ppm: number,          // äºŒæ°§åŒ–ç¢³æµ“åº¦ (ppm)
    total_hydrocarbons_limit?: number, // æ€»çƒƒé˜ˆå€¼ (å¯é€‰)
    prpd_feature?: string,    // PRPD ç‰¹å¾ (å¯é€‰)
    transformer_id?: string   // å˜å‹å™¨ID (å¯é€‰)
  }
]
```

#### è¯·æ±‚ç¤ºä¾‹

```javascript
const requestData = [{
  H2_ppm: 150,
  CH4_ppm: 60,
  C2H6_ppm: 20,
  C2H4_ppm: 50,
  C2H2_ppm: 150,
  CO_ppm: 100,
  CO2_ppm: 400,
  total_hydrocarbons_limit: 150
}];

fetch('http://3.27.250.156:5678/webhook/power-fault-diagnosis-1', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify(requestData)
});
```

#### å“åº”æ•°æ®ç»“æ„

**æˆåŠŸå“åº”** (HTTP 200):
```typescript
// n8n è¿”å›çš„æ•°æ®ç»“æ„ï¼ˆæ•°ç»„æ ¼å¼ï¼‰
[
  {
    // è¾“å…¥å‚æ•°å›æ˜¾
    H2_ppm: number,
    CH4_ppm: number,
    C2H6_ppm: number,
    C2H4_ppm: number,
    C2H2_ppm: number,
    CO_ppm: number,
    CO2_ppm: number,
    prpd_feature: string,
    total_hydrocarbons_limit: number,
    
    // è¯Šæ–­åˆ†æç»“æœ
    three_ratio_code_array: number[],      // ä¸‰æ¯”å€¼ç¼–ç æ•°ç»„
    three_ratio_diagnosis: string,         // ä¸‰æ¯”å€¼è¯Šæ–­ç»“æœ
    dpm_fault_code: string,               // DPM æ•…éšœä»£ç 
    characteristic_gas_diagnosis: string,  // ç‰¹å¾æ°”ä½“è¯Šæ–­
    is_discharge_fault: boolean,          // æ˜¯å¦ä¸ºæ”¾ç”µæ•…éšœ
    dpm_diagnosis_result: string,         // DPM è¯Šæ–­ç»“æœ
    dmp_diagnosis_description: string,    // DPM è¯Šæ–­æè¿°
    dpm_recommendation: string            // DPM æ¨èæªæ–½
  }
]
```

#### é”™è¯¯å¤„ç†

ç³»ç»Ÿå†…ç½®äº†å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼š

```typescript
// HTTP çŠ¶æ€ç é”™è¯¯
if (!response.ok) {
  const errorBody = await response.text();
  throw new Error(`HTTP error ${response.status}: ${errorBody}`);
}

// æ•°æ®ç»“æ„éªŒè¯
if (Array.isArray(result) && result.length > 0) {
  return result[0];  // è¿”å›æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå¯¹è±¡
} else {
  console.warn('Unexpected API response structure:', result);
  return result;
}
```

#### é›†æˆç‰¹ç‚¹

1. **æ•°æ®æ ¼å¼é€‚é…**: è‡ªåŠ¨å¤„ç† n8n webhook æœŸæœ›çš„æ•°ç»„æ ¼å¼
2. **é”™è¯¯æ¢å¤**: å®Œæ•´çš„ HTTP é”™è¯¯å’Œæ•°æ®æ ¼å¼å¼‚å¸¸å¤„ç†
3. **ç±»å‹å®‰å…¨**: å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰
4. **å“åº”é€‚é…**: è‡ªåŠ¨è§£åŒ…æ•°ç»„å“åº”è¿”å›æ ¸å¿ƒæ•°æ®å¯¹è±¡

### é€»è¾‘é—¨å·¥ä½œæµç³»ç»Ÿ

#### ğŸ§  åˆ›æ–°çš„é€»è¾‘é—¨å¯è§†åŒ–

ç³»ç»Ÿå¼•å…¥äº†é©å‘½æ€§çš„é€»è¾‘é—¨æ•…éšœæ ‘å¯è§†åŒ–æŠ€æœ¯ï¼š

```typescript
// src/services/workflowParser.ts - å·¥ä½œæµè§£ææœåŠ¡
// src/utils/logicGateRenderer.ts - é€»è¾‘é—¨æ¸²æŸ“å¼•æ“
// src/components/logic/EnhancedFaultTree.vue - å¢å¼ºæ•…éšœæ ‘ç»„ä»¶
```

**æ ¸å¿ƒç‰¹æ€§**ï¼š
- **n8n Workflow è§£æ**ï¼šæ™ºèƒ½è§£æ n8n å·¥ä½œæµ JSON æ•°æ®
- **é€»è¾‘å…³ç³»æå–**ï¼šè‡ªåŠ¨è¯†åˆ« AND/OR/NOT é€»è¾‘å…³ç³»
- **åŠ¨æ€æ¸²æŸ“**ï¼šæ”¯æŒå±‚æ¬¡ã€å¾„å‘ã€ç´§å‡‘ä¸‰ç§å¸ƒå±€ç®—æ³•
- **å®æ—¶çŠ¶æ€**ï¼šé€»è¾‘é—¨çŠ¶æ€å®æ—¶æ›´æ–°å’Œå¯è§†åŒ–
- **äº¤äº’æ§åˆ¶**ï¼šæ”¯æŒç¼©æ”¾ã€æ‹–æ‹½ã€èŠ‚ç‚¹ç‚¹å‡»ç­‰äº¤äº’

**æ•°æ®ç»“æ„**ï¼š
```typescript
interface LogicGateNode {
  id: string;
  type: 'logic_gate';
  gate_type: 'AND' | 'OR' | 'NOT';
  name: string;
  condition: string;
  state: 'true' | 'false' | 'unknown';
  input_nodes: string[];
  output_nodes: string[];
}
```

### å›¾åƒè¯Šæ–­APIé›†æˆ

#### ğŸ–¼ï¸ AIé©±åŠ¨çš„å›¾åƒæ™ºèƒ½åˆ†æ

```typescript
// src/services/imageDiagnosis.ts - å›¾åƒè¯Šæ–­æœåŠ¡
```

**æ”¯æŒçš„å›¾åƒç±»å‹**ï¼š
- **PRPD** - ç›¸ä½åˆ†è§£å±€éƒ¨æ”¾ç”µå›¾è°±
- **UHF** - è¶…é«˜é¢‘æ£€æµ‹å›¾åƒ  
- **TEV** - æš‚æ€åœ°ç”µå‹å›¾åƒ
- **AE** - å£°å‘å°„æ£€æµ‹å›¾åƒ

**APIç«¯ç‚¹**ï¼š
```typescript
POST /api/image-diagnosis
Content-Type: multipart/form-data

// è¯·æ±‚å‚æ•°
{
  equipment_info: EquipmentInfo,
  image_files: File[],
  image_type: 'PRPD' | 'UHF' | 'TEV' | 'AE',
  sensitivity: 'low' | 'medium' | 'high'
}

// å“åº”ç»“æ„
{
  task_id: string,
  image_analysis: {
    discharge_type: string,
    severity_level: number,
    confidence_score: number,
    fault_location: string
  },
  processed_images: ProcessedImage[],
  ai_insights: string[],
  recommended_actions: string[]
}
```

### æ•…éšœæ ‘ç®¡ç†API

#### ğŸ—‚ï¸ å®Œæ•´çš„æ•…éšœæ ‘ç”Ÿå‘½å‘¨æœŸç®¡ç†

```typescript
// æ•…éšœæ ‘å…ƒæ•°æ®ç®¡ç†
interface FaultTreeMetadata {
  id: string;
  name: string;
  status: 'draft' | 'active' | 'archived' | 'template';
  category: string;
  version: string;
  tags: string[];
  permissions: FaultTreePermission;
}

// CRUDæ“ä½œæ”¯æŒ
- GET /api/fault-trees        // è·å–æ•…éšœæ ‘åˆ—è¡¨
- POST /api/fault-trees       // åˆ›å»ºæ–°æ•…éšœæ ‘
- PUT /api/fault-trees/:id    // æ›´æ–°æ•…éšœæ ‘
- DELETE /api/fault-trees/:id // åˆ é™¤æ•…éšœæ ‘
- POST /api/fault-trees/:id/clone // å…‹éš†æ•…éšœæ ‘
```

### æœ¬åœ°æ¨¡æ‹Ÿ API

å¼€å‘ç¯å¢ƒä¸‹ï¼Œç³»ç»Ÿè¿˜æä¾›äº†æœ¬åœ°æ¨¡æ‹Ÿ API æœåŠ¡ (`mockApi.v2.ts`)ï¼Œæ”¯æŒï¼š

- æ™ºèƒ½è¯Šæ–­é€»è¾‘æ¨¡æ‹Ÿ
- ä¸‰æ¯”å€¼æ³•åˆ†æ
- ç‰¹å¾æ°”ä½“åˆ†æ
- DPM è¯Šæ–­æ–¹æ³•
- å®Œæ•´çš„æ•…éšœç±»å‹è¯†åˆ«
- å›¾åƒè¯Šæ–­æ¨¡æ‹Ÿ

## å®‰è£…å’Œè¿è¡Œ

### ç¯å¢ƒè¦æ±‚

- **Node.js**: ^20.19.0 || >=22.12.0
- **npm**: æœ€æ–°ç¨³å®šç‰ˆæœ¬

### å®‰è£…æ­¥éª¤

1. å…‹éš†é¡¹ç›®ä»“åº“ï¼š
```bash
git clone <repository-url>
cd fault-diagnosis-system
```

2. å®‰è£…ä¾èµ–ï¼š
```bash
npm install
```

3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š
```bash
npm run dev
```

4. æ„å»ºç”Ÿäº§ç‰ˆæœ¬ï¼š
```bash
npm run build
```

### å¯ç”¨è„šæœ¬

```bash
npm run dev          # å¯åŠ¨å¼€å‘æœåŠ¡å™¨ (é»˜è®¤ç«¯å£: 5173)
npm run build        # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run preview      # é¢„è§ˆç”Ÿäº§æ„å»º
npm run type-check   # TypeScript ç±»å‹æ£€æŸ¥
npm run lint         # ESLint ä»£ç æ£€æŸ¥
npm run format       # Prettier ä»£ç æ ¼å¼åŒ–
```

### ğŸš€ å¿«é€Ÿå¼€å§‹æŒ‡å—

1. **å¯åŠ¨ç³»ç»Ÿ**ï¼š
```bash
npm run dev
```

2. **è®¿é—®ç³»ç»Ÿ**ï¼š
   - å¼€å‘æœåŠ¡å™¨: `http://localhost:5173` (æˆ–æ˜¾ç¤ºçš„ç«¯å£)
   - ç³»ç»Ÿä¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨è®¿é—®é¦–é¡µ

3. **æ ¸å¿ƒåŠŸèƒ½è®¿é—®è·¯å¾„**ï¼š
   - **æ•…éšœæ¨ç†**: `/diagnosis` - ä¼ ç»Ÿæ°”ä½“åˆ†æè¯Šæ–­
   - **æ•…éšœæ ‘å±•ç¤º**: `/test1` - é€»è¾‘é—¨å¯è§†åŒ–å±•ç¤º
   - **æ•…éšœæ ‘ç®¡ç†**: `/fault-tree-management` - æ•…éšœæ ‘CRUDç®¡ç†
   - **å›¾åƒè¯Šæ–­**: `/image-diagnosis` - AIå›¾åƒåˆ†æ
   - **è¯Šæ–­å†å²**: `/history` - å†å²è®°å½•æŸ¥çœ‹
   - **æ–‡æ¡£ç®¡ç†**: `/documents` - æŠ€æœ¯æ–‡æ¡£ç®¡ç†

### ğŸŒŸ Demoæ•°æ®ä½“éªŒ

ç³»ç»Ÿå†…ç½®äº†ä¸“ä¸šçš„demoæ•°æ®ï¼ŒåŸºäºå®é™…PDFæŠ€æœ¯æ–‡æ¡£åˆ¶ä½œï¼š

1. **è®¿é—®æ•…éšœæ ‘ç®¡ç†é¡µé¢** (`/fault-tree-management`)
2. **æŸ¥çœ‹ä¸“ä¸šç¤ºä¾‹**: "æœ¬ä½“å¼‚å¸¸äº§æ°”æ•…éšœè¯Šæ–­ï¼ˆä¸“ä¸šç¤ºä¾‹ï¼‰"
3. **ç‚¹å‡»é¢„è§ˆ**: ä½“éªŒå®Œæ•´çš„é€»è¾‘é—¨æ•…éšœæ ‘å¯è§†åŒ–
4. **å°è¯•ä¸åŒå¸ƒå±€**: å±‚æ¬¡ã€å¾„å‘ã€ç´§å‡‘ä¸‰ç§æ¨¡å¼
5. **äº¤äº’æ“ä½œ**: ç¼©æ”¾ã€æ‹–æ‹½ã€èŠ‚ç‚¹ç‚¹å‡»ç­‰åŠŸèƒ½

## å¼€å‘æŒ‡å—

### ğŸ› ï¸ å¼€å‘ç¯å¢ƒé…ç½®

**æ¨èå¼€å‘å·¥å…·**ï¼š
- **IDE**: VSCode + Volar æ’ä»¶
- **Node.js**: v20.19.0+ æˆ– v22.12.0+
- **æµè§ˆå™¨**: Chrome/Edge (æ”¯æŒVue DevTools)

### ä»£ç è§„èŒƒ

é¡¹ç›®é‡‡ç”¨ç°ä»£åŒ–çš„ä»£ç è´¨é‡æ§åˆ¶ä½“ç³»ï¼š

- **ESLint**: ä»£ç è´¨é‡æ£€æŸ¥å’Œæ½œåœ¨é—®é¢˜è¯†åˆ«
- **Prettier**: ä»£ç æ ¼å¼åŒ–å’Œé£æ ¼ç»Ÿä¸€
- **TypeScript**: ç±»å‹å®‰å…¨å’Œå¼€å‘æ—¶é”™è¯¯æ£€æŸ¥
- **Vue DevTools**: Vue 3 ç»„ä»¶è°ƒè¯•æ”¯æŒ

### ğŸš€ æ‰©å±•å¼€å‘æŒ‡å—

#### 1. æ·»åŠ æ–°çš„è¯Šæ–­æ–¹æ³•

```typescript
// 1. åœ¨ src/types/index.ts ä¸­å®šä¹‰ç±»å‹
interface NewDiagnosisMethod {
  methodName: string;
  parameters: any[];
  result: DiagnosisResult;
}

// 2. åœ¨ src/services/diagnosis.ts ä¸­å®ç°API
export const runNewDiagnosis = async (params: NewDiagnosisParams) => {
  // å®ç°è¯Šæ–­é€»è¾‘
}

// 3. åœ¨ç»„ä»¶ä¸­é›†æˆä½¿ç”¨
// 4. æ›´æ–°è·¯ç”±å’Œå¯¼èˆªé…ç½®
```

#### 2. å¼€å‘æ–°çš„é€»è¾‘é—¨å¸ƒå±€

```typescript
// åœ¨ src/utils/logicGateRenderer.ts ä¸­æ·»åŠ æ–°å¸ƒå±€
export class LogicGateRenderer {
  calculateCustomLayout(faultTree: EnhancedFaultTreeNode): Map<string, RenderPosition> {
    // å®ç°è‡ªå®šä¹‰å¸ƒå±€ç®—æ³•
  }
}
```

#### 3. åˆ›å»ºæ–°çš„å¯è§†åŒ–ç»„ä»¶

```vue
<!-- src/components/logic/NewVisualization.vue -->
<template>
  <div class="new-visualization">
    <!-- ç»„ä»¶å†…å®¹ -->
  </div>
</template>

<script setup lang="ts">
// ä½¿ç”¨ Vue 3 Composition API
// ç±»å‹å®‰å…¨çš„ TypeScript
// Element Plus ç»„ä»¶è§„èŒƒ
</script>
```

#### 4. æ‰©å±•å›¾åƒè¯Šæ–­åŠŸèƒ½

```typescript
// src/services/imageDiagnosis.ts
export const addNewImageType = (imageType: string) => {
  // æ·»åŠ æ–°çš„å›¾åƒç±»å‹æ”¯æŒ
}
```

### ç»„ä»¶å¼€å‘è§„èŒƒ

- **Vue 3 Composition API**: ä¼˜å…ˆä½¿ç”¨ç»„åˆå¼API
- **TypeScript**: å¼ºåˆ¶ç±»å‹æ ‡æ³¨ï¼Œç¡®ä¿ç±»å‹å®‰å…¨
- **Element Plus**: éµå¾ªç»„ä»¶åº“è®¾è®¡è§„èŒƒå’Œä¸»é¢˜ç³»ç»Ÿ
- **å•ä¸€èŒè´£**: ä¿æŒç»„ä»¶åŠŸèƒ½å•ä¸€ã€èŒè´£æ¸…æ™°
- **ç»„ä»¶å‘½å**: ä½¿ç”¨ PascalCaseï¼Œåç§°å…·æœ‰æè¿°æ€§
- **Propså®šä¹‰**: ä½¿ç”¨ TypeScript interface ä¸¥æ ¼å®šä¹‰
- **äº‹ä»¶å‘½å**: ä½¿ç”¨ camelCaseï¼Œéµå¾ªVueçº¦å®š

### ğŸ“ æ–‡ä»¶ç»„ç»‡è§„èŒƒ

```
æ–°åŠŸèƒ½å¼€å‘ç»“æ„ï¼š
src/
â”œâ”€â”€ components/
â”‚   â””â”€â”€ [feature]/           # æŒ‰åŠŸèƒ½åˆ†ç»„
â”‚       â”œâ”€â”€ FeatureComponent.vue
â”‚       â””â”€â”€ FeatureDialog.vue
â”œâ”€â”€ services/
â”‚   â””â”€â”€ featureService.ts    # å¯¹åº”çš„æœåŠ¡
â”œâ”€â”€ types/
â”‚   â””â”€â”€ index.ts            # æ·»åŠ ç±»å‹å®šä¹‰
â””â”€â”€ views/
    â””â”€â”€ FeatureView.vue     # ä¸»é¡µé¢ç»„ä»¶
```

### ğŸ§ª æµ‹è¯•å’Œè°ƒè¯•

```bash
# ç±»å‹æ£€æŸ¥
npm run type-check

# ä»£ç è´¨é‡æ£€æŸ¥
npm run lint

# ä»£ç æ ¼å¼åŒ–
npm run format
```

**è°ƒè¯•æŠ€å·§**ï¼š
- ä½¿ç”¨æµè§ˆå™¨ Vue DevTools æ’ä»¶
- åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ `console.log` è¿›è¡Œè°ƒè¯•
- åˆ©ç”¨ TypeScript çš„ç±»å‹æç¤ºåŠŸèƒ½
- ä½¿ç”¨ Vite çš„çƒ­æ›´æ–°åŠŸèƒ½å¿«é€Ÿå¼€å‘

## éƒ¨ç½²å’Œé…ç½®

### ç”Ÿäº§ç¯å¢ƒæ„å»º

```bash
npm run build
```

æ„å»ºäº§ç‰©å°†ç”Ÿæˆåœ¨ `dist/` ç›®å½•ä¸­ã€‚

### ç¯å¢ƒå˜é‡é…ç½®

å¯ä»¥é€šè¿‡ `.env` æ–‡ä»¶é…ç½®ç¯å¢ƒå˜é‡ï¼š

```bash
# n8n webhook ç«¯ç‚¹
VITE_N8N_WEBHOOK_URL=http://your-n8n-instance:5678/webhook/your-webhook-id

# å›¾åƒè¯Šæ–­APIç«¯ç‚¹
VITE_IMAGE_DIAGNOSIS_API=http://your-image-api-server.com

# API åŸºç¡€è·¯å¾„
VITE_API_BASE_URL=http://your-api-server.com

# åº”ç”¨é…ç½®
VITE_APP_TITLE=å›½ç½‘æ•…éšœè¯Šæ–­ç³»ç»Ÿ
VITE_APP_VERSION=2.0.0
```

### ğŸŒ éƒ¨ç½²æ–¹æ¡ˆ

#### 1. é™æ€æ–‡ä»¶éƒ¨ç½²

ç³»ç»Ÿæ„å»ºä¸ºçº¯é™æ€æ–‡ä»¶ï¼Œæ”¯æŒå¤šç§éƒ¨ç½²æ–¹å¼ï¼š

```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# dist/ ç›®å½•åŒ…å«æ‰€æœ‰é™æ€æ–‡ä»¶
dist/
â”œâ”€â”€ index.html
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ index-[hash].js
â”‚   â”œâ”€â”€ index-[hash].css
â”‚   â””â”€â”€ [other-assets]
â””â”€â”€ [static-files]
```

#### 2. æ¨èéƒ¨ç½²å¹³å°

- **Nginx**: é«˜æ€§èƒ½WebæœåŠ¡å™¨
  ```nginx
  server {
    listen 80;
    server_name your-domain.com;
    root /path/to/dist;
    index index.html;
    
    location / {
      try_files $uri $uri/ /index.html;
    }
  }
  ```

- **Apache**: ä¼ ç»ŸWebæœåŠ¡å™¨
- **CDNéƒ¨ç½²**: é˜¿é‡Œäº‘OSSã€è…¾è®¯äº‘COSç­‰
- **å®¹å™¨åŒ–**: Docker + Nginx

#### 3. Dockeréƒ¨ç½²ç¤ºä¾‹

```dockerfile
# Dockerfile
FROM nginx:alpine
COPY dist/ /usr/share/nginx/html/
COPY nginx.conf /etc/nginx/conf.d/default.conf
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

## ğŸ“Š ç³»ç»Ÿç‰¹è‰²äº®ç‚¹

### ğŸ¯ æŠ€æœ¯åˆ›æ–°ç‚¹

1. **é€»è¾‘é—¨å¯è§†åŒ–å¼•æ“** - ä¸šç•Œé¦–åˆ›çš„ç”µåŠ›æ•…éšœè¯Šæ–­é€»è¾‘é—¨å¯è§†åŒ–ç³»ç»Ÿ
2. **å¤šæ¨¡æ€è¯Šæ–­é›†æˆ** - èåˆæ°”ä½“åˆ†æã€å›¾åƒAIã€é€»è¾‘æ¨ç†çš„ç»¼åˆè¯Šæ–­å¹³å°
3. **ä¸“ä¸šæ•°æ®é©±åŠ¨** - åŸºäºå®é™…PDFæŠ€æœ¯æ–‡æ¡£çš„ä¸“ä¸šæ•…éšœè¯Šæ–­çŸ¥è¯†åº“
4. **ä¼ä¸šçº§ç®¡ç†** - å®Œæ•´çš„æ•…éšœæ ‘ç”Ÿå‘½å‘¨æœŸç®¡ç†å’Œæƒé™æ§åˆ¶ç³»ç»Ÿ

### ğŸ† åº”ç”¨ä»·å€¼

- **æå‡è¯Šæ–­æ•ˆç‡**: å¯è§†åŒ–é€»è¾‘å…³ç³»ï¼Œå¿«é€Ÿå®šä½æ•…éšœåŸå› 
- **é™ä½æ“ä½œé—¨æ§›**: ç›´è§‚çš„å›¾å½¢ç•Œé¢ï¼Œé™ä½ä¸“ä¸šæŠ€æœ¯è¦æ±‚
- **æ ‡å‡†åŒ–æµç¨‹**: åŸºäºå›½ç½‘æ ‡å‡†çš„æ ‡å‡†åŒ–è¯Šæ–­æµç¨‹
- **çŸ¥è¯†æ²‰æ·€**: æ•…éšœæ ‘æ¨¡æ¿åŒ–ç®¡ç†ï¼Œç§¯ç´¯è¯Šæ–­ç»éªŒ

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿ä¸ºé¡¹ç›®è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æµç¨‹ï¼š

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### è´¡çŒ®ç±»å‹

- ğŸ› Bug ä¿®å¤
- âœ¨ æ–°åŠŸèƒ½å¼€å‘
- ğŸ“ æ–‡æ¡£æ”¹è¿›
- ğŸ¨ UI/UX ä¼˜åŒ–
- âš¡ æ€§èƒ½ä¼˜åŒ–

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) å¼€æºè®¸å¯è¯ã€‚

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- **GitHub Issues**: [æäº¤é—®é¢˜å’Œå»ºè®®](https://github.com/your-org/fault-diagnosis-system/issues)
- **æŠ€æœ¯æ–‡æ¡£**: æŸ¥çœ‹é¡¹ç›®Wikiè·å–è¯¦ç»†æŠ€æœ¯æ–‡æ¡£
- **ç¤¾åŒºè®¨è®º**: åŠ å…¥æŠ€æœ¯è®¨è®ºç¾¤ç»„

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…å’Œå›½å®¶ç”µç½‘æä¾›çš„ä¸“ä¸šæŠ€æœ¯æŒ‡å¯¼ã€‚

---

Â© 2024 å›½ç½‘æ•…éšœè¯Šæ–­ç³»ç»Ÿ. All rights reserved.

**âš¡ ç°ä»£åŒ– | ğŸ§  æ™ºèƒ½åŒ– | ğŸ”¬ ä¸“ä¸šåŒ– | ğŸ¯ å¯è§†åŒ–**